!function(){"use strict";function e(e){e.initialize()}angular.module("newscache",["ngRoute","ui.bootstrap","ngMessages","wu.masonry","ngStomp","newscache.config","newscache.service","newscache.controller","newscache.route","newscache.directive","newscache.templates"]).config(["$locationProvider",function(e){}]).run(e),e.$inject=["AuthService"]}(),function(){"use strict";angular.module("newscache.config",[])}(),function(){"use strict";angular.module("newscache.service",["newscache.service.navbar","newscache.service.storyModal","newscache.service.session","newscache.service.login","newscache.service.home","newscache.service.auth","newscache.service.loginModal"])}(),function(){"use strict";function e(e,n,t){function o(){function t(e){return e}function o(e){return console.log(e),n.reject(e)}return e("./api/navbar_search/load",{},{execute:{method:"GET",isArray:!0}}).execute().$promise.then(t)["catch"](o)}function r(t){function o(e){return e}function r(e){return console.log(e),n.reject(e)}return console.log("In service"),console.log(t),e("./api/navbar_search/search/"+t,{},{execute:{method:"GET"}}).execute().$promise.then(o)["catch"](r)}return{loadInterests:o,findInterest:r}}angular.module("newscache.service.navbar",["ngResource"]).factory("NavbarService",e),e.$inject=["$resource","$q","$location"]}(),function(){"use strict";function e(e,n){function t(t){function o(e){return e}function r(e){return console.log(e),n.reject(e)}return e("./api/navbar_search/search/"+t,{},{execute:{method:"GET"}}).execute().$promise.then(o)["catch"](r)}function o(t){function o(e){return e}function r(e){return console.log(e),n.reject(e)}return e("./api/interest/load/"+t,{},{execute:{method:"GET",isArray:!0}}).execute().$promise.then(o)["catch"](r)}function r(t){function o(e){return e}function r(e){return console.log(e),n.reject(e)}return e("./api/interest/follow",{},{execute:{method:"POST"}}).execute(t).$promise.then(o)["catch"](r)}function c(t){function o(e){return e}function r(e){return console.log(e),n.reject(e)}return e("./api/interest/unfollow",{},{execute:{method:"POST"}}).execute(t).$promise.then(o)["catch"](r)}return{findInterest:t,loadStories:o,follow:r,unfollow:c}}angular.module("newscache.service.interest",["ngResource"]).factory("InterestService",e),e.$inject=["$resource","$q"]}(),function(){"use strict";function e(e,n){function t(t){function o(e){return e}function r(e){return console.log(e),n.reject(e)}return e("./api/comment/load/"+t,{},{execute:{method:"GET",isArray:!0}}).execute().$promise.then(o)["catch"](r)}function o(t){function o(e){return e}function r(e){return console.log(e),n.reject(e)}return e("./api/comment/save",{},{execute:{method:"POST"}}).execute(t).$promise.then(o)["catch"](r)}return{loadComments:t,saveComment:o}}angular.module("newscache.service.storyModal",["ngResource"]).factory("StoryModalService",e),e.$inject=["$resource","$q"]}(),function(){"use strict";function e(e,n,t,o){function r(e,r){return o.login(e,r).then(function(){t.path("/home")})["catch"](function(e){return console.log("In login service"),n.reject(e)})}return{login:r}}angular.module("newscache.service.login",["ngResource","newscache.service.session"]).factory("LoginService",e),e.$inject=["$resource","$q","$location","SessionService"]}(),function(){"use strict";function e(e,n){function t(t,o){function r(e){return s=!0,e}function c(e){return console.log(e+"In session service"),n.reject(e)}var i={authorization:"Basic "+btoa(t+":"+o)};return e("./api/login",{},{execute:{method:"GET",headers:i}}).execute().$promise.then(r)["catch"](c)}function o(){function t(e){return s=!1,e}function o(e){return console.log(e+"In session service"),n.reject(e)}return e("./api/logout",{},{execute:{method:"GET"}}).execute().$promise.then(t)["catch"](o)}function r(){return s}function c(){function t(e){return e}function o(e){return n.reject(e)}return e("./api/user",{},{execute:{method:"GET"}}).execute().$promise.then(t)["catch"](o)}var s=!1;return{login:t,logout:o,isLoggedIn:r,getCurrentUser:c}}angular.module("newscache.service.session",["ngResource"]).factory("SessionService",e),e.$inject=["$resource","$q"]}(),function(){"use strict";function e(e,n,t){return{}}angular.module("newscache.service.home",["ngResource"]).factory("HomeService",e),e.$inject=["$resource","$q","$location"]}(),function(){"use strict";function e(e,n,t){function o(){t.location=n,t.$on("$routeChangeStart",function(){e.isLoggedIn()!==!0&&n.path("/login").search("")})}return{initialize:o}}angular.module("newscache.service.auth",["ngResource","newscache.service.session"]).factory("AuthService",e),e.$inject=["SessionService","$location","$rootScope"]}(),function(){"use strict";function e(e,n){function t(t){function o(e){return e}function r(e){return console.log(e),n.reject(e)}return e("./user/register",{},{execute:{method:"POST"}}).execute(t).$promise.then(o)["catch"](r)}return{saveUser:t}}angular.module("newscache.service.loginModal",["ngResource"]).factory("LoginModalService",e),e.$inject=["$resource","$q"]}(),function(){"use strict";angular.module("newscache.controller",["newscache.controller.navbar","newscache.controller.interest","newscache.controller.storyModal","newscache.controller.login","newscache.controller.home","newscache.controller.loginModal"])}(),function(){"use strict";function e(e,n,t){function o(){return r().then(function(){console.log("Loaded the interests")})["catch"](function(){console.log("Error loading interests")})}function r(){return e.loadInterests().then(function(e){u.interestList=e})["catch"](function(e){u.errors=e})}function c(){return t.logout().then(function(){return u.interestList=[],n.path("/login")})["catch"](function(e){u.errors=e})}function s(e,n){return e.substr(0,n.length).toLowerCase()==n.toLowerCase()}function i(){return e.findInterest(u.interest).then(function(e){return n.path("/interest").search({param:e.name})})["catch"](function(e){u.errors=e})}var u=this;u.startsWith=s,u.search=i,u.logout=c,u.interest="",u.interestList=[],u.errors={},o()}angular.module("newscache.controller.navbar",["newscache.service.navbar","newscache.service.session"]).controller("NavbarController",e),e.$inject=["NavbarService","$location","SessionService"]}(),function(){"use strict";function e(e,n,t,o,r,c){function s(){return u().then(function(){return console.log("Loaded the interest"),n.resolve()}).then(h).then(a)["catch"](function(e){m.errors=e})}function i(){return m.subscribeDto.username=m.user.username,m.subscribeDto.interestName=m.interestName,"Follow"===m.subscribe?e.follow(m.subscribeDto).then(function(e){m.subscribe="Unfollow",console.log(e)})["catch"](function(e){m.errors=e}):e.unfollow(m.subscribeDto).then(function(e){m.subscribe="Follow",console.log(e)})["catch"](function(e){m.errors=e})}function u(){return e.findInterest(m.interestName).then(function(e){m.interest=e,console.log(m.interest)})["catch"](function(e){m.errors=e})}function a(){return c.getCurrentUser().then(function(e){m.user=e.principal;for(var n=0;n<m.user.interestList.length;n++)if(m.user.interestList[n].name===m.interestName)return void(m.subscribe="Unfollow");m.subscribe="Follow",console.log(m.user)})["catch"](function(e){m.errors=e})}function l(e){return e.replace(/\s+/g,"").toLowerCase()}function h(){return e.loadStories(m.interestName).then(function(e){return m.storyList.stories=e,console.log(m.storyList),m.isDataLoaded=!0,n.resolve()})["catch"](function(e){return m.errors=e,n.reject()})}function f(e){m.storyModal=r.open({templateUrl:"newscache/template/storyModal.html",controller:"StoryModalController",controllerAs:"vm",windowClass:"my-dialog",resolve:{story:function(){return e}},animation:!0})}var m=this;m.interestName=o.param,m.interest={},m.errors={},m.storyList={stories:[]},m.isDataLoaded=!1,m.storyModal={},m.user={},m.subscribe="",m.subscribeDto={},m.subscription=i,m.popUp=f,m.convert=l,s()}angular.module("newscache.controller.interest",["newscache.service.interest","newscache.service.session"]).controller("InterestController",e),e.$inject=["InterestService","$q","$location","$routeParams","$uibModal","SessionService"]}(),function(){"use strict";function e(e,n,t,o,r,c,s){function i(){return console.log(h.user),u().then(function(){return console.log("loaded the comments"),s.resolve()}).then(function(){return c.getCurrentUser().then(function(e){h.user=e,h.username=h.user.principal.username,console.log("vm.user",h.username)})["catch"](function(e){console.log(e)})})["catch"](function(e){console.log(e)})}function u(){return t.loadComments(h.story.title).then(function(e){h.comments=e})["catch"](function(e){console.log(e)})}function a(){return h.commentDto.storyTitle=h.story.title,h.commentDto.storyComment=h.storyComment,h.commentDto.username=h.username,t.saveComment(h.commentDto)["catch"](function(e){console.log(e)})}function l(){e.close("ok")}var h=this;h.story=n,h.storyComment="",h.comments=[],h.user={},h.username="",h.storyTitle="",h.commentDto={storyTitle:"",username:"",storyComment:""},h.closeStory=l,h.save=a,i(),r.connect("/newscache/stomp").then(function(){r.subscribe("/out/message",function(e){h.comments.push(e),o.$apply()})})}angular.module("newscache.controller.storyModal",["newscache.service.storyModal","newscache.service.session"]).controller("StoryModalController",e),e.$inject=["$uibModalInstance","story","StoryModalService","$scope","$stomp","SessionService","$q"]}(),function(){"use strict";function e(e,n,t){function o(){return e.login(s.username,s.password)["catch"](function(e){console.log(e)})}function r(){console.log(n.isLoggedIn())}function c(){s.loginModal=t.open({templateUrl:"newscache/template/loginModal.html",controller:"LoginModalController",controllerAs:"vm",animation:!0})}var s=this;s.username="",s.password="",s.loginModal={},s.loginPopUp=c,s.submit=o,r()}angular.module("newscache.controller.login",["newscache.service.login","newscache.service.session"]).controller("LoginController",e),e.$inject=["LoginService","SessionService","$uibModal"]}(),function(){"use strict";function e(e,n){function t(){}var o=this;o.activate=t,t()}angular.module("newscache.controller.home",["newscache.service.home","newscache.service.session"]).controller("HomeController",e),e.$inject=["HomeService","SessionService"]}(),function(){"use strict";function e(e,n,t,o,r,c){function s(){}function i(){return n.saveUser(a.user).then(function(){return u(),t.login(a.user.username,a.user.password).then(function(){r.path("/home")})["catch"](function(e){return console.log("In login service"),o.reject(e)})})["catch"](function(e){console.log(e)})}function u(){e.close("ok")}var a=this;a.user={},a.successPrompt={},a.closeModal=u,a.register=i,a.close=close,s()}angular.module("newscache.controller.loginModal",["newscache.service.loginModal"]).controller("LoginModalController",e),e.$inject=["$uibModalInstance","LoginModalService","SessionService","$q","$location","$scope"]}(),function(){"use strict";angular.module("newscache.route",["newscache.route.interest","newscache.route.login","newscache.route.home"])}(),function(){"use strict";function e(e,n){e.when("/interest",{templateUrl:"newscache/template/interest.html",controller:"InterestController",controllerAs:"vm"}),n.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}angular.module("newscache.route.interest",["ngRoute","newscache.controller.interest","newscache.templates"]).config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,n){e.when("/login",{templateUrl:"newscache/template/login.html",controller:"LoginController",controllerAs:"vm"}).otherwise("/login"),n.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}angular.module("newscache.route.login",["ngRoute","newscache.controller.login","newscache.templates"]).config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,n){e.when("/home",{templateUrl:"newscache/template/home.html",controller:"HomeController",controllerAs:"vm"}),n.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}angular.module("newscache.route.home",["ngRoute","newscache.controller.home","newscache.templates"]).config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";angular.module("newscache.directive",["newscache.directive.navbar","newscache.directive.back_img"])}(),function(){"use strict";function e(e){return{restrict:"AE",templateUrl:"newscache/template/navbar.html",controller:"NavbarController",controllerAs:"vm"}}angular.module("newscache.directive.navbar",["newscache.controller.navbar","newscache.templates"]).directive("navbarDirective",e),e.$inject=["$location"]}(),function(){"use strict";function e(e){return{restrict:"AE",scope:{url:"="},link:function(n,t){e(function(){t.css("background-image","url('./img/"+n.url+".jpg')")},0)}}}angular.module("newscache.directive.back_img",[]).directive("backImgDirective",e),e.$inject=["$timeout"]}();
//# sourceMappingURL=all.min.js.map
